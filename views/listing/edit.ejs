<% layout('/layouts/boilerplate.ejs') %>

<div class="bg-gray-100 flex justify-center px-5">
  <div class="w-full max-w-2xl rounded-xl p-3">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Edit your Listing</h2>

    <form
      action="/wanderlust/listings/<%= listing._id %>?_method=PATCH"
      method="POST"
      class="space-y-4"
      enctype="multipart/form-data"
    >
      <!-- Title -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Title</label
        >
        <input
          type="text"
          name="listing[title]"
          required
          minlength="3"
          placeholder="Add a catchy title"
          value="<%= listing.title %>"
          class="peer w-full px-3 py-1.5 border border-gray-400 rounded-lg bg-gray-100 focus:ring-2 focus:ring-indigo-500 focus:outline-none invalid:border-red-500"
        />
        <p
          class="mt-1 text-sm text-red-500 hidden peer-invalid:block peer-placeholder-shown:hidden"
        >
          Title is required (minimum 3 characters)
        </p>
      </div>

      <!-- Description -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Description</label
        >
        <textarea
          name="listing[description]"
          rows="3"
          required
          minlength="10"
          placeholder="Describe your listing"
          class="peer w-full px-3 py-1.5 border border-gray-400 rounded-lg bg-gray-100 focus:ring-2 focus:ring-indigo-500 focus:outline-none invalid:border-red-500"
        >
<%= listing.description %></textarea
        >
        <p
          class="mt-1 text-sm text-red-500 hidden peer-invalid:block peer-placeholder-shown:hidden"
        >
          Description must be at least 10 characters
        </p>
      </div>

      <!-- Image URL (NO validation as requested) -->
      <div>
        <img src="<%=originalUrl%>" alt="edit imaage" class="h-20 w-30 pb-2">
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Update image</label
        >
        <input
          type="file"
          name="listing[image]"
          placeholder="Enter image URL"
          class="w-full px-3 py-1.5 border border-gray-400 bg-gray-100 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        />
      </div>

      <div class="flex gap-2">
        <!-- Price -->
        <div class="w-1/2">
          <label class="block text-sm font-medium text-gray-700 mb-1"
            >Price (â‚¹)</label
          >
          <input
            type="number"
            name="listing[price]"
            required
            min="1"
            placeholder="1200"
            value="<%= listing.price %>"
            class="peer w-full px-3 py-1.5 border border-gray-400 rounded-lg bg-gray-100 focus:ring-2 focus:ring-indigo-500 focus:outline-none invalid:border-red-500"
          />
          <p
            class="mt-1 text-sm text-red-500 hidden peer-invalid:block peer-placeholder-shown:hidden"
          >
            Price must be greater than 0
          </p>
        </div>

        <!-- Country -->
        <div class="w-1/2">
          <label class="block text-sm font-medium text-gray-700 mb-1"
            >Country</label
          >
          <input
            type="text"
            name="listing[country]"
            required
            placeholder="India"
            value="<%= listing.country %>"
            class="peer w-full px-3 py-1.5 border border-gray-400 bg-gray-100 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none invalid:border-red-500"
          />
          <p
            class="mt-1 text-sm text-red-500 hidden peer-invalid:block peer-placeholder-shown:hidden"
          >
            Country is required
          </p>
        </div>
      </div>

      <!-- Location -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1"
          >Location</label
        >
        <input
          type="text"
          name="listing[location]"
          required
          placeholder="Noida, Uttar Pradesh"
          value="<%= listing.location %>"
          class="peer w-full px-3 py-1.5 border border-gray-400 bg-gray-100 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:outline-none invalid:border-red-500"
        />
        <p
          class="mt-1 text-sm text-red-500 hidden peer-invalid:block peer-placeholder-shown:hidden"
        >
          Location is required
        </p>
      </div>

      <!-- Submit -->
      <button
        type="submit"
        class="bg-red-600 text-white py-2 px-5 rounded-lg font-medium hover:bg-red-700 transition"
      >
        edit
      </button>
    </form>
  </div>
</div>
